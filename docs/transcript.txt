Друзья, всех приветствую на новом общающем ролике. Сегодня мы рассмотрим написание ботов с помощью и искусственного интеллекта. Мы будем использовать сегодня нейросеть грок для того, чтобы написать действительно рабочих торговых ботов, протестируем их и запустим БРал. Но для начала я хочу вам показать данную табличку разделения торговых ботов на классы. Я е показывал в прошлых своих обучающих роликах, где мы писали торговых бытов вручную на Python. Сегодня мы, соответственно, тоже будем использовать Python, но просто за нас будет писать код наша нейросеть. Давайте рассмотрим эту таблицу. Соответственно, у нас есть боты. Они делятся на новостных ботов, на ботов, использующих неэффективности и на торговых. Когда мы используем нейронные сети, мы можем писать любых абсолютно бодов, потому что в целом у них хватает знаний для написания любого логического кода. Самое главное выдать им логическую цепочку в виде промта. В общем-то, самое интересное, что мы можем написать - это БТИ использование неэффективности и торговый. Это основано на мом личном опыте и является мнением. Конечно же, есть и новостные боты, которые очень неплохо зарабатывают, в том числе, например, парсер. Но сегодня я вам предлагаю рассмотреть именно торговых ботов. В принципе, из них самые простые - это классические индикаторные. Также мы можем переносить ICT концепты в наших ботов. Давайте для начала сформируем теорию нашего бота, то есть его логику. И для формирования какой-то нашей гипотезы, основы нашей торговой стратегии, нам необходимо рассмотреть следующую табличку. Тоже я е рассказывал в предыдущих роликах про бктесты. То есть у нас есть основная идея бота. Далее, под эту основную идею мы уже ищем вспомогательные фильтры и пишем саму стратегию, а именно подбор параметров и ктест. Впоследствии, когда мы получаем данные о самых лучших параметрах, бэктестим данную стратегию и понимаем, что это действительно работает, мы уже запускаем е в реал. Так как сегодня у нас идт упорное использование нервных стей, то я вам предлагаю буквально сделать скрин данного стола, соответственно, с классическими ботами, и уже бот за нас придумает непосредственно саму логику. Соответственно, будем мы сегодня использовать грох, как я уже ранее сказал. Давайте в него закинем нашу, собственно, схему, где у нас видно все наши быты. Схема есть в открытом доступе. Я оставлю на не ссылку в описании. Давайте напишем промт. Промт, соответственно, мы желательно пишем на английском, потому что вс-таки для нейровности это более родной язык, и чаще всего на нм они работают гораздогораздо лучше. И давайте разберм, что есть в нашем пронте. Во-первых, мы говорим о том, то что, собственно, наша неросеть становится профессиональным трейдером и аналитиком. Собственно, что она будет нам выдавать? Во-первых, она ей необходимо распознать данную картинку, разобрать, какие есть на ней индикаторы. Ну, соответственно, далее, распознав все эти индикаторы, она построит стратегию, полную стратегию, основную на трх-пяти фильтрах. И для каждой стратегии он распишет нам условия входа, выхода, стоп-лосса и тейки. И также дополнительные фильтры вместе с плюсами и минусами самой стратегии. Впоследствии уже какой-то итоговый вывод, и этого будет достаточно вполне для написания нами полной торговой стратегии. Давайте отправим и посмотрим, что же мы получим. Естественно, мы работаем в режиме погружения, ведь нам здесь не нужен быстрый ответ. Нам нужен действительно качественный код и действительно качественная стратегия. Немного подождав в ответе, мы получаем готовые стратегии. Давайте их рассмотрим. Первая стратегия, которую мы получили - это MAGD Yama RSE. Довольно интересная стратегия. Я думаю, то, что можно будет действительно е сегодня посмотреть. А пока что не будем читать это, просто выберем действительно саму стратегию. Далее у нас идт RCI Bollinger Divergens. Тоже довольно неплохо звучит. И думаю то, что мы тоже можем е рассмотреть. А есть ли ещ какие-то стратегии? Да, есть третья стратегия - это IT Orderflow на продолжение, что довольно интересно. Здесь он будет использовать у нас имбалансы для подтверждения самого orderfow и также SMT вместе с волатильностью. Далее, четвртая стратегия - это у нас по мультитав. В принципе, интересно, но думаю то, что здесь нужны будут дополнительные фильтры. Давайте посмотрим, что у нас здесь предлагается. Это классические 4H15М модели вместе с квазимодом. Здесь довольно сомнительно, потому что, в принципе, квазимоды - это и есть классическая под вид reвеersal моделей. Поэтому думаю то, что это стоит пропустить, тем более, что SMR у нас на крипте встречается не так часто и в целом не так интересен, довольно сложен в исполнении. Давайте вернмся к изначальным стратегиям и выберем какую-то одну из них. Я предлагаю вам выбрать первую стратегию, так как она довольно простая в понимании даже для новичков. Я думаю, что всем вам известны такие индикаторы, как MACD, EMA и также Bullinger Bands. Мы также будем использовать Quizim Reвеersal модели. Это модель, о которой у меня есть целое видео на канале, когда у нас идт проект ликвидности и впоследствии см структуры. Давайте это вс скопируем и далее попросим его расписать это гораздо подробнее. А для формирования запроса нам понадобится функция FCH clean для того, чтобы показать с помощью какой функции необходимо нашему скрипту будет подтягивать свечи. То есть LCV данные данные об открытии, закрытии, максимуме, минимуме свечи. Также стемп и объм. Эта функция есть в мом обучении. Вы можете его найти абсолютно бесплатно в мом Telegram-канале. Также я не раз показывал эту функцию публично, поэтому и здесь делюсь тоже ей с вами. Здесь наш промт может быть довольно коротким, так как мы уже ранее описывали нейросети, что и необходимо делать. Соответственно, мы запрашиваем сделать код для стратегии, полный ктест-код с использованием свеча из Бинанса и также дам функцию FCH Cleaness для того, чтобы несеть смогла подтянуть свечи грамотно. Потому что они довольно часто делают ошибки в таких вещах и не всегда грамотно работают с AP. Поэтому здесь лучше вс-таки вмешиваться самому. И именно поэтому вам необходимо хотя бы какое-то минимальное понимание. Даже при работе с абсолютно автоматизированными стратегиями с помощью и аналогично скидывая данный ответ, мы ставим режим харсин, то есть полного погружения, чтобы не растить подумала подольше и ответ был действительно качественный. Теперь, когда мы уже получили готовый код, я вам предлагаю перейти в Visual Studio, создать свой файл и, соответственно, нужно начать работать непосредственно с тем, что нам выдало неращать. Теперь, когда мы вставили наш код, необходимо по нему хотя бы одним взглядом буквально пройтись, потому что обратите внимание на то, что здесь могут быть какие-то несостыколовки. Давайте посмотрим, импортированы ли все библиотеки. И здесь, например, вверху мы видим то, что у нас не импортирована библиотека. Поэтому давайте вручную это сделаем. Соответственно, просто пишем импорта. В случае, если вы не понимаете, в чм проблема, видите какие-то ошибки при запуске кода, вы также можете обратиться к нейросети с описанием ошибки, с кодом ошибки и с большей вероятностью она вам вс отлично поправит. Теперь давайте запустим наш код. Я его назвал testgrock. Запускаем его, как обычно, с помощью команды Python testg.p, соответственно, и ждм, пока он выполнится. Надо посмотреть, выдаст на ошибку или исполнится верно. В общем-то, за этим мы сейчас сюда и пришли. И впоследствии мы уже будем налаживать наш бэк-тест и, в принципе, работу с самим кодом, самой стратегией. И теперь мы видим наш результат. И он оказывается не очень-то хорошим. Давайте посмотрим, какой у нас использовался период и какие у нас использовались фильтры. Значит, первое, что мы видим - это период в 10.000 пятнадцатиминутных свечей. Опять также попробуем проверить, например, на пятиминутном интервале поставим, а, например, 20.000 свечей, потому что это будет более объективно. Ну и, соответственно, запустим бэктест. Ещ раз. Может быть, здесь результат оказался лучше, но мы видим всего два трейда и даже несмотря на стопроцентный винрей на отрезке от 20.000 пятиминутных свечей, что приблизительно равняется где-то 80 дням. Это довольно грустный результат. Поэтому стоит ослабить фильтры и посмотреть, как у нас работает данная стратегия. Давайте вс рассмотрим буквально построчно. Вернмся в самый верх кода и найдм функцию нашего фелис, которая нам уже известна. Она просто подтягивает свечи, и здесь нам менять нечего. А вот далее идт интересное, это расчт индикаторов. Во-первых, период сглаживания EMA, что довольно важно. Мы здесь берм 50 для EMA 50. Также рассчитываем EMA 12 и EM26. Соответственно, можем также работать с этими данными. И я думаю, то, что в скрытия перебора, который мы чуть позже создадим с помощью нерости, мы тоже это обязательно учтм. Смотрите, далее мы рассчитываем MGD. ляма, где нам необходимы параметры сигнал. Ну и, собственно, сам период сигнал равный девяти - это довольно неплохое значение. Я обычно использую либо шесть, либо девять. То есть это вот два стандартизированных значения, которые чаще всего у нас и используются. Далее. Во-первых, параметры сглаживания для Bollinger Benz, то есть для линий Болинджера. 20 - это довольно неплохой период, а вот мультипликатор и смещение в двойку являются довольно большим. И в целом неудивительно на то, что у нас так мало сигналов, потому что при таком мультипликаторе мы не так часто и приходим в наши линии Боллинджера. Поэтому я предлагаю вам его уменьшить. Давайте вынесем его в отдельную переменную. Соответственно, займм ем е BB STD. А и она у нас будет равна 1,5. По моему личному опыту это довольно неплохое значение, поэтому сейчас применим его. Впоследствии уже будем его перебирать с помощью специального скрипта. Хорошо, с этим разобрались. Далее у нас идт детект зимода. В принципе, стратегия довольно консервативная, потому что так много параметров одновременно исполняется не так часто. Вы тоже должны это понимать. Поэтому я вам предлагаю, возможно, даже пока что это просто убрать для того, чтобы посмотреть на то, как эти индикаторы работают в связке. Для этого можно вообще удалить эти функции, но давайте их пока что оставим, потому что впоследствии они нам, возможно, потребуются. И здесь найдм строчку, которая отвечает за квазимоду. Вот они, в общем-то, наши функция. Это detect и detect QML bear. А мы не будем их удалять, просто удалим отсюда условия. То есть, если мы выделим данное условия, мы увидим, что у нас, в общем-то, здесь и используется эта вся история. Но кроме того, стоп-лосс у нас рассчитывается позимоде. Это мне не очень нравится, поэтому я бы хотел вс-таки это поправить. Здесь у нас идт вычитание АТР с мультипликатором. Я вам предлагаю вычитать его не сквозьмоды, а из просто цены закрытия свечи. В данном случае это DF close. Я об этом очень подробно рассказывал также в одних из первых обучающих роликов. Хорошо, здесь мы это сделали. Также необходимо сделать для входа на шорт. Здесь мы также видим QML high. Удаляем его из условия входа. Ну и, соответственно, расчт делаем по закрытию свечи. Def close. А, смотрите, даже можно сделать проще. У нас есть переменная entry, так что и здесь, и там мы можем просто использовать переменную entry. Единственный момент, да, если вы пишете, смотрите, получается def close, обязательно указывать индекс. Я этого изначально не сделал, но вот в идеале нужно делать таким образом. То есть def close, где и, где i - это индекс. Ну, здесь это хорошо видно. То есть вот это как рассчитывается у нас entry. Тоже довольно важный момент. То есть про это мы не забываем. А просчитываем теперь вс правильно. Так, давайте посмотрим, не используются ли у нас ещ где-то кзимоды. И здесь я нигде этого не вижу, поэтому предлагаю просто продолжить. Давайте заново запустим наш бэктест и посмотрим, как отработает наша стратегия. И даже удалив фильтры кзимода, параметры не стали очень хорошими. У нас опять же всего лишь четыре трейда за такой довольно большой период. Давайте посмотрим, что будет у нас на, например, минутных свечах, потому что тоже довольно интересная стратегия будет. Повысим немного количества свечей для того, чтобы взять тот же самый период, примерно в 80 дней. и снова запустим наш бэктест. Довольно забавно, но на минутке мы вообще не увидели трейдов. То есть, возможно, стратегия вс-таки не заточена подминутный таймфрейм, и на нм при небольших колебаниях, при небольшой волатильности просто не происходят наши условия. Далее давайте поработаем с нейросетью, потому что здесь мы, в принципе, понимаем то, что у нашей стратегии есть определнные трудности, поэтому скопируем наш код и дальше уже будем использовать промты и поговорим о том, что нам необходимо поправить и как увеличить количество профитных сигналов. Для формирования нашего запроса К мы уже можем писать, в принципе, на русском, потому что, думаю, то, что большинство из вас так будет просто удобнее. И грок вполне неплохо справляется также и с русским текстом. Мы просто скидываем наш код, говорим о том, что стратегия действительно работает плохо, описываем нашу ситуацию с таймфреймовым и количеством сигналом. Ну и, соответственно, просим в трх наших задачах. Во-первых, ослабить фильтр и продумать логику заново. Вероятнее всего, он оставит логику очень сильно схожей с той, что есть сейчас. Но тем не менее могут быть какие-то определнные грехи, которые также можно исправить. Далее ему необходимо будет сделать функцию, давайте функцию перебора с помощью парамгрид. Давайте так и напишем, да, чтобы было более понятно. А парамгрид, соответственно, это у нас словарь, где у нас будут разные параметры для наших функций. Тоже можем это пояснить. Где будут разные настройки для а каждой а каждого фильтра и функции. Ну и, соответственно, говорим о том, что мы перебираем все нужные параметры. А, и далее создам функцию перебора. Собственно, мы это сделали во втором шаге. И впоследствии она нам будет должна выдать самый лучший результат за историю этих приборов. Давайте отправим это. Также работаем в режиме погружения. Соответственно, он у меня сейчас стоит автоматический, но периодически он может переключаться на быстрый ответ, что нам однозначно не нужно. Спустя несколько минут мы снова получаем код. Давайте его скопируем и перенесм, собственно, в Visual Studio. Соответственно, тоже быстренько пройдмся, проверим, возможно, есть какие-то ошибки. Visual Studion нам ничего не выделяет, поэтому думаю, что вс отлично. И давайте посмотрим функцию, которую он добавил. Вот он наш GD Search. Это основная функция, которая мне наиболее интересна. И здесь есть такие параметры, как интервал, период, ну и, соответственно, все остальные, которые мне и интересны. Также он вернул квазимода фильтр, я так понимаю, да? Давайте найдм нашу функцию бэктеста и проверим это. Так, хай, да, действительно, тут мы видим то, что он е вернул. Давайте пока что е оставим, потому что это вс-таки бэктест, тем более, что здесь есть такие параметры, как use QML extreme sell, то есть когда у нас рассчитывается стоп, исходя из квазимода. Также есть волюмфильтр, ну и прочие интересные настройки вот по типу, например, статического рескрварда, что тоже очень даже неплохо. Опять же три интересующих меня интервала. Давайте также добавим, пожалуй, часовой интервал и уберм минутный, потому что мы вс-таки строим интродейтер недельную стратегию, поэтому, в принципе, нам не так интересен здесь сльp интервал минутный, потому что он чаще всего не отрабатывает в подобных стратегиях. А давайте посмотрим, какие здесь есть ещ параметры. Можем для того, чтобы у нас бактест прошл, побыстрее удалить данные параметры, поставить, например, 5.000 свечей, потому что для общей картины этого будет достаточно. Ну и, собственно, запустить наш бэк-тест. Друзья, теперь наш бэктест завершн. И результаты меня очень даже порадовали. Обратите внимание на то, что Нрейд у нас держится на отметке в 76. Total panel, то есть общий PNL составляет 8,17 и 43 трейда с среднем PNL в 0,2, что является отличным результатом. Я думаю, то, что в рамках данной стратегии мы не будем рассчитывать такие коэффициенты, как Шарп, потому что, в принципе, здесь и так ясно то, что она действительно работает, у не хорошая стабильная прибыль и на отрезке 43 трейда получить Нрей 76 76 - это довольно непростая история, поэтому прекрасный результат, и я считаю, то, что можно его переводить в реальную торговлю. Интервал у нас часовой, соответственно, й период у нас 100. Давайте сразу это здесь вс выставим, соответственно, чтобы у нас было в соответствии с лучшим результатом. Теперь для того, чтобы перенести нашу торговую стратегию уже в ла-режим, то есть когда она будет подтягивать каждый час новую свечу, добавлять е в наш датафрейм и, соответственно, работать уже с индикаторами с данными, нам необходимо скинуть наш код с настройками и сказать о том, что нерсете нашей игроку необходимо сделать подтягивание автоматическое свечей каждый час. Ну и, соответственно, мониторинг позиции. Давайте это и сделаем. А я сразу сделаю важную поморку, что для переноса своей стратегии я буду использовать биржу BНК, на которой я обычно торгую. Напомню вам то, что своим рефералом я делаю скидки. И также у меня есть бесплатный курс по алготрейдингу с готовыми решениями, готовыми ботами для моих рефералов. Абсолютно без любых условий по объму, то есть вс полностью бесплатно. Соответственно, данный клиент, он также является публичным. Я много раз им делился и с теми, кто не является ни моими рефералами, ни моими подписчиками. Соответственно, здесь у нас есть функции постановки стоплоссов, функции постановки тейкпрофитов, также функция постановки основного ордера, куда мы также можем поставить единичный стоп-лосс или единичный тейк профит. Здесь мы будем использовать именно эту биржу, потому что она наиболее удобная по комиссиям, наиболее удобная по IP и в целом мне конкретно удобно с ней работать. Соответственно, у меня есть готовый клиент, я его скидываю и и говорю о том, то что я уже вывел лучшие настройки и они находятся в парам грид. То есть это вот где мы подгоняли все эти настройки. Вот он наш парам грид. Важно обозначить, чтобы у нас он вставил именно эти настройки. И мы просим его сделать life working бата, то есть который будет работать в реалтайме. Давайте также это подпишем для лучшего понимания. Будет работать в реальном времени. а, и который будет каждый час подтягивать новую свечу, искать на ней сигналы. Собственно, это то, что нам и нужно. И описываем, что открытие позиции необходимо сделать на бирже BНК с помощью функции готового клиента. А давайте тоже подпишем, который я отправил файлом. И скинем название файла тоже, чтобы не возникло каких-то недопониманий. Вс, скидываем наш код, скидываем промт и ждм, что нам он выдаст. Снова обращаем внимание на то, что здесь глубокое мышление идт, и не нужно выбирать быстрый ответ, просто потому что в таком случае вы обязательно наткнтесь на какие-то определнные ошибки. Друзья, также я вам хочу сказать о важном моменте. Давайте мы вернмся в наш основной скрипт и посмотрим, да? То есть у нас был бэк-тест по биткоину, я вам напоминаю, но вс-таки на таких особенно агрессивных стратегиях, в случае, когда мы говорим об Prinaday стратегиях, о каких-то краткосрочных стратегиях, то есть с прицелом меньше чем на неделю, когда позиции держатся недолго, нам стоит тестировать также и альпары. Это просто логично, потому что на них больше волатильности, да, и в целом, чем больше монеток и параметров мы протестируем, тем лучше. Никогда не бойтесь тестировать вс по максимуму. Пусть на это уйдт в пару раз больше времени, но в любом случае вы получите отличный результат. Поэтому я вам предлагаю протестировать, например, Lightcoin. Это отличная альтмонетка, которая хорошо ходит, ходит технично, следует за общим рынком, с небольшими своими отклонениями, особенностями в движении, там, корректировкой на волатильность, скажем. То есть у него просто большая бета, да? Бета - это то, насколько она следует за рынком. То есть корреция высокая, но при этом движение более волатильные. Мы возьмм L йкоin, те же 5.000 свечей. Параметры я вам предлагаю его оставить подобные. Ну разве что внедрить, например, пятнадцатиминутный интервал, больше сглаживания для Болинджера, мультипликатора, да, например, RВА 1,5 и2. То есть это просто быстрый бэктест, который нам позволит посмотреть, возможно, есть какие-то хорошие стратегии и на лайткоине. Давайте это сейчас запустим, да, и для вас я специально сделаю помарку. то, что когда у нас в аргументах функции прописаны базовые значения, то основными доминирующими будут не они, а те, которые мы передам при вызове функции. Это особенность структура Python. И вам это стоит знать, так как нейросети очень часто дают именно здесь базовые какие-то значения, но вам не стоит обращать на них внимание, просто потому что впоследствии при вызове функции вы, скорее всего, будете их заменять под необходимые. И давайте проведм, запустим код. И как вы можете видеть, результат здесь отличный. Я бы сказал, что он даже лучше. Давайте посмотрим. Интервал у нас также часовой. Период 100, сглаживание двоечка, аsl мультипликатор, соответственно, полтора, рискре уже двоечка. Ну и все остальные настройки, те, которые были у нас и ранее. И PН здесь уже практически 19, что является отличным результатом при количестве трейдов в 49. Wiinate 70. Так что это прекрасный результат. И я считаю то, что в realта также стоит перенести и эту стратегию. Я вам предлагаю сейчас, пока у нас генерируется ответ, построить также Эквитикур для своего понимания того, насколько же сглажена у нас прибыль. И здесь, так как грок нам пока что генерирует этот, я вам предлагаю перейти в чат GPT. Собственно, скидываем ему код, так как ранее он его не видел, и просим самую простую вещь. То есть просто отрисовать Equity Curve с помощью библиотеки Modp Clip для лучшей торговой системы. Это довольно простой запрос, поэтому он не требует каких-то очень больших промонтов и с наибольшей вероятностью часть GPT выдаст ответ правильный. Также я, в общем-то, в начале говорил о том, то что использование, например, ГРОК, оно не принципиально. То есть вы вс можете делать в чат GPT deepsi. Это вот, наверное, тройка нейронных сетей, которые работают с алгоритмическим трейдингом. действительно неплохой, который я могу посоветовать. Просто на мом опыте грок наиболее точный. Собственно, копируем это. Да, здесь также есть пример вызова, который мы перенесм, собственно, в наш цикл. Давайте это сделаем и перейдм к коду. Посмотрим, как наш equity будет выглядеть. Мы это сделали изменения, это у нас появилась а функция plot acquic. И когда мы говорим о том, что если у нас лучший результат, да, есть это условие, то, соответственно, если оно выполняется, то мы и отрисовываем нашу прекрасную фигурку, то есть кривую капиталу, да, если говорить на русском. Соответственно, здесь нам нужно перед функцией ввести переменную bestf, то есть лучший датафйм со свечами опять же формата open, close, high low и так далее. И здесь мы говорим, что если наш результат лучше, чем лучший результат, то есть текущий результат лучше лучшего на момент прогона данной стратегии какой-то определнной, то мы задам bestf как вот наш датафрейм, который мы получили при прогоне текущей стратегии, которая теперь и станет нашей лучшей. Собственно, параметры мы оставляем те же. Давайте сделаем те параметры, которые у нас были в лучшем результате. Просто потому, что здесь мне интересно отрисовать именно а саму кривую капитала для лучшей стратегии, которую мы уже получили. Давайте это сделаем. Запустим наш скрипт. Мы получили нашу кровую капиталы. И мы здесь видим довольно неплохой результат. Обратите внимание то, что даже чисто визуально, без каких-то скриптов мы можем увидеть то, что у нас в принципе и нету более двух убыточных трейдов подряд. То есть мы можем увидеть то, что есть какие-то трейды, которые понесли довольно неприятный убыток, как, например, здесь. То есть мы потеряли около 0 верет от депозита. Соответственно, здесь была довольно неприятная просадка, тоже в 2,53 от депозита и вс. А в остальном сама кривая довольно плавная. Я более чем уверен то, что на более больших промежутках, например, даже в 100.000 свечи, она будет выглядеть отлично. И пока мы занимались тем, что тестировали Lcoin, грок уже выдал нам готовый код для real time бота. Он вышел довольно большой, потому что он перенс все функции из BНК клиента в данный скрипт. Я вам предлагаю перенести это вс и рассмотреть, что же он нам сделал. Соответственно, верхний блок - это BН клиент. Он вынес это в отдельный клиент, что очень хорошо. А вы можете обратить внимание на то, что он не импортировал библиотеку Шмат. Давайте перейдм в, собственно, наш скрипт клиента и просто импортируем все библиотеки отсюда. Удалим Jon, потому что он здесь тоже импортируется. Проверим, чтобы не было двойных импортов. И да, действительно, вот теперь вс отлично. Здесь пока что вс хорошо. Для того, чтобы работать на теснете, мы можем прописать по URL здесь здесь тире VST. Соответственно, этот блок нам не интересен, потому что я уверен, его работоспособность и видно то, что вс перенесено символ в символ. Соответственно, далее то, что меня уже интересует - это расчт индикаторов, который, как мы видим, сохранился. И параметры, да, давайте изменим параметры на те, которые у нас были для ледкоина, потому что вс-таки результат для него действительно получился более интересный, более приемлемый даже, я бы сказал. Поэтому этот актив мне гораздо интереснее, чем биткои. Состно, здесь нам необходимо вписать ключи AP secret. Я чуть позже это сделаю, и мы протестируем, как, в общем-то, работает наш скрипт. Возможно, мы не дождмся открытия позиции, но тем не менее посмотрим хотя бы и убедимся в его работоспособности. Давайте немного разберм логику, да? У нас есть цикл while true, соответственно, что правильно, и проверка. Если количество минут равно нулю, это условие нового часа. Вс, здесь вс отлично. и количество секунд менее 30трицати, чтобы у нас не было повторения, соответственно, то мы получаем свечи с помощью нашей прекрасной функции getans. Далее рассчитываем индикаторы, делаем индекс i, который у нас будет длина нашего таймфрей -1, что собственно также логично, потому что в Пайтоне нумерация индексов начинается с нуля, а не с единицы. Ну и, собственно, рассчитываем здесь вс. То есть у нас идт во-первых ответ от позиции. То есть проверяем, если у нас открытые позиции с помощью функции get positions. Далее задам две булевые переменные и делаем их true в случае, если находим определнную позицию, да? Поэтому здесь вс логика правильная. Далее у нас идт, если мы не в позиции, то мы уже рассчитываем всю нашу вот эту историю, всю логику. Соответственно, в случае, если у нас выполняются все наши условия, мы получаем getmk price, то есть цены маркировки нашего актива. Обратить внимание то, что она подтягивается из клиента. То, что мы задам выше. Соответственно, далее у нас идт расчт АТР, стопа, риска и тейкпрофита. Здесь вс логично. Также получаем баланс доступный. Рассчитываем риск USDT. То есть это наш риск на стоп в долларах. Это более приемлемая модель. Я считаю то, что она примитивна более к таким как раз агрессивным скриптам. В свинмоделях мы можем использовать немного другие модели, когда мы рассчитываем позицию, исходя из заданного размера на позицию. То есть, допустим, 1.000 долларов на позицию. Это стать. Здесь у нас идт динамика, потому что действительно размер позиции может быть разный. Говорим о том, что если мы правильно рассчитали, тогда мы уже выставляем ордер. И здесь вс правильно. Далее выставляем с помощью функции set multiple SL и SWAT multiple TP стоп и take profit. Здесь вс у нас отлично. В случае, если вс верно выставилось, выводим сообщение о том, то что мы открыли лонг. Также цену входа, стопа, йк. Здесь вс верно. А, и здесь аналогично для шортового сигнала. Это даже нет смысла здесь смотреть. Там, в принципе, если вы обратите внимание, тут вс абсолютно аналогично. Далее смотрим, что если мы в позиции, то, соответственно, мы аналогично получаем цены на маркировки, рассчитываем далее индикаторы, рассчитываем новый стоп необходимости. И также в случае, если новый стоп более чем стоп позиции, мы отменяем тот ордер и ставим новый. Здесь вс, в принципе, в рамках логики, потому что здесь у нас идт трейлинг подтяжка. Я не думаю, что это обязательно. И в целом можно это даже убрать. И здесь идт такая логика, то что мы потягиваем сто безубыток, когда мы достигли один к одному. Это немного повысит Нрейд, но это не в рамках нашей стратегии, поэтому я бы вс-таки скорее пока что закомментировал эту логику. Давайте так и сделаем. И потому что такие вещи стоит проверять вс-таки в реале. Тяжело довольно отбктестить, хотя тоже можно. Далее, после того, как это произошло, давайте посмотрим. Это в случае, если у нас позиция закрыта, то есть это часть постановки нашего трейлинга. И в таком случае это нас не интересует. Давайте проверим, вс ли сейчас правильно. Да, вс отлично. То есть это, в принципе, вся логика открытия позиции, и нам ничего более не нужно. То есть здесь самое главное то, что у нас ставится ордер, просчитываются стоп и takeйк. И вс. Давайте запустим та и посмотрим, чтобы он работал вс-таки грамотно. Выпускаем скрипт. Видим, что он начал свою работу. Теперь нам необходимо подождать правильного времени, чтобы он действительно проверил наш сигнал. Видим то, что мы зашли сюда, то есть время наступило, я поставил 35 минут, так как на данный момент у нас 15:35 просто для удобства и проверки. И действительно, можем понять то, что здесь у нас не возникает никаких ошибок, мы не получаем эпtion и, вероятно, в текущей ситуации у нас просто нету сигналов. В целом, для того, чтобы убедиться в том, что вс отлично работает, мы можем, например, а, сделать print по response, то есть проверить, какие у нас есть сейчас позиции на демосчоте. Далее, э, здесь вывести, например, то, что мы не в позиции. Хотя у меня в любом случае сейчас есть позиции, поэтому пока что здесь нету смысла что-то смотреть. Ну, в общем-то, давайте, да, это сделаем, посмотрим. Если это будет правильно работать, то вс отлично. Соответственно, запускаем нашего бота. Сейчас у нас уже не выполняется это условия, да? Давайте удалим секунды опять же для проверки. Просто чуть позже вернм помощ Ctrl C. Прерываем скрипты и запускаем заново. Уже трише минута, да? Здесь просто нужно подогнать это под тест, чтобы посмотреть, как у нас данный цикл отработает. А, думаю, что вс сейчас должно пройти гладко. Здесь у нас появляется наша надпись checking for signals. Немного подождм, пока у нас подтянутся наши свечи и рассчитатся индикаторы. Естественно, на это нужно время. После того, как наш скрипт, в общем-то, отработал, мы видим такую ошибку. То есть здесь отсюда мы можем понять то, что в функции get positions у нас какая-то ошибка. И действительно, нейросети иногда могут немного косячить с этим. Давайте сначала посмотрим в BX client и посмотрим, возможно, здесь он отличается. В другом случае мы посмотрим документацию. Думаю, то, что для многих из вас это будет полезно. Positions. Здесь даже такого запроса в целом нету. То есть, вероятно всего, игрок сам решил то, что ему необходимо это ввести и поэтому решил добавить данную функцию. Давайте залезем в документацию Bingx и найдм, как нам это реализовать. Мы сейчас оказались документации бинкса, и нам необходимо найти функцию, которая нам вернт все открытые позиции. Соответственно, у нас здесь есть раздел account points. Давайте посмотрим, что тут есть. То есть вот то, что нам нужно. Query position data. Читаем. Retrief information on users positions of perpetals web. То, что нам нужно. То есть мы с помощью этой функции получим, в общем-то, те позиции, которые сейчас открыты у юзера. В принципе, я думаю, то, что игрок реазовал вс верно. Во-первых, давайте посмотрим код. Мы увидим, что, например, давайте прийдм, да, к этой функции, что, например, пармс здесь реализован неверно, потому что нам необходим такой параметр, обратите внимание, как стемп. Да, это очень важный момент. Символ, кстати говоря, нам не требуется, но тем не менее мы его указываем в формате тира. Давайте проверим, так ли это. На самом деле, даже не проверяем, мы можем сделать очень простую вещь. Мы пишем, что символ равен символ и используем работу со строками. Соответственно, мы пишем, что нам необходимы данные до, вернее, от четвртого символа. Таким образом, мы отрежем USDT. Далее мы здесь добавляем наше тире. И здесь мы пишем символ плюс плюс. И здесь нам нужно также обрезать строку, соответственно, уже до минусчетго изначального символа. То есть делаем таким образом, но не включая его, да, обратить внимание, то есть здесь в данной ситуации до минутре. Таким образом мы получим именно то, что нам нужно, но нам необходимо указать условия if наша чрточка не символи изначальны. В любом другом случае мы вернм просто символ. То есть данная инкотенация у нас производится в случае, если нашей чрточки нету в символе. Если она есть, то мы чаем просто символ и символ равен символу. Далее, интересный момент. В демопримере от BН что мы видим? Здесь у нас используется парам STR в демо, то есть мы переводим всю историю в парам SPR. S str, собственно, параметры. Здесь у нас символ, но функции пар мы здесь добавляем. Обратите на это внимание. То есть нам тоже необходимо добавить стемп. Просто здесь это делается отдельной функцией, а мы это сделаем непосредственно в параметрах. И теперь, когда мы сделали данные пробки и добавили принудительно stamp в наш get positions, внимание то, что здесь опять же нет функции par sparм, как здесь, обратите на это внимание. Это очень важный момент, потому что здесь у нас добавляется таймстмп к нашим то есть к нашим аргументам. Но нам необходимо это сделать вручную просто потому, что мы не вводим эту функцию, так как я считаю то, что это просто лишние функции, которые нам абсолютно не нужны, которые нам лишь мешают. Теперь, когда мы это сделали, я предлагаю снова вс проверить. У нас сейчас 46 минут, поэтому давайте здесь ведм 46, снова запустим наш скрипт и посмотрим, есть ли у меня какие-то позиции. Сейчас их, скорее всего, уже на бирже не будет. Я проверил этот момент. Ну и, соответственно, нам необходимо в любом случае это проверить. Переходим сюда. То есть вот наш цикл. Теперь у нас получится сейчас наш скрипт данные о свечах и впоследствии позиции и выведет нам их. Собственно, это то, что нам необходимо обратить внимание. То есть вот он наш position response. Ответ о позициях. Мы его выводим и получаем то, что позиции у нас сейчас нету. У нас как раз сейчас исполнится этот код, и мы проверим, действительно ли он работает. То есть действительно ли скрипт рабочий, вс ли хорошо в нм с логикой. Поймм мы это, если просто не увидим здесь сейчас ошибок. Давайте подождм немно и теперь спустя время мы видим то, что вс отлично. Во-первых, да, у нас действительно нет позиций. Далее у нас прогоняется весь этот код, и мы видим то, что вс у нас отлично, у нас нет никаких ошибок. О чм нам это говорит? О том, что наша логика прекрасно работает. Да, мы сейчас не будем проверять логику открытия позиции в реалтаме, потому что на это уйдт очень-очень много времени. И вероятно то, что даже сегодня не будет никаких сигналов. Они могут быть завтра, могут быть даже послезавтра. Это вс зависит от состояния рынка и от огромного количества переменных. Поэтому, друзья, в любом случае, вот рабочий, логика правильная, и я гордостью могу заявить, что всего за 40 минут мы написали полностью рабочую алгоритмическую торговую стратегию с использованием. И вы можете абсолютно не знать языков программирования, да, какие-то базовые вещи я мог сделать и вручную, тем более, что я довольно давно в этой истории. Я понимаю, как работает язык программирования, понимаю все эти функции. Но даже если у вас нету таковых знаний, если вы в принципе никогда не занимались Пайтоном, вы всегда можете что-то спросить. Уи вам всегда подскажет. Можете просто скинуть ошибку, скинуть код и сказать, что вот у меня такая ошибка, тебе необходимо е поправить. Этого будет достаточно. Не занимайтесь всегда тем, что вы каждый раз пишите огромные промты и так далее. Вы видели то, что некоторые промты я вообще писал на русском, они составляли одно-два предложения. Сейчас я предлагаю вам на этом закончить, потому что действительно мы справились. Мы очень быстро написали полноценную торговую стратегию. Да, сразу скажу, возможно, она не идеальна. Возможно, стоит более грамотно е оттестировать, проверить все индикаторы, проверить все коэффициенты, рассчитать. Но я вам точно могу сказать, во-первых, тут нету заглядывания в будущее, и этот результат объективен. Мы с вами убедились в этом, когда посмотрели на кривую капитала. Также вся логика здесь абсолютно грамотная. Желательно делайте следующим образом. Вы можете готовый скрипт закинуть вы и спросить, например, в другой можно в тот же чат GP, например, после грока спросить, нет ли здесь заглядывания будущего. Соответствует ли этот скрипт всему необходимому для того, чтобы провести полноценный правильный бэк-тест? Чаще всего это так и будет, и вс будет верно. иногда могут быть какие-то ошибки. И для этого лучше вс-таки спрашивать у другой и вс ли тут хорошо, чтобы она чтко проверила вс по каждой строчечке. Я не рекомендую вам использовать прямо эту готовую стратегию. Например, если вы хотите использовать подобный код, подобную логику, я, конечно же, оставлю ссылку на GitHub, но вс-таки советую вам доработать е, найти новые, более грамотные параметры, адресовать чуть больше данных, чуть больше индикаторов и коэффициентов и уже впоследствии работать с этим. Но я думаю, что вы убедились, что действительно написание алгоритмических стратегий - это не так сложно. Не забывайте про мой Telegram-канал. Там я делюсь своей ежедневной аналитикой по рынку. Очень много позиций за последнее время, особенно вне крипты, в том числе по металлам, по Форексу. И действительно забираем отличные прибыли. Также есть бесплатный курс по алготрейдингу на аж 75 страниц с семью готовыми стратегиями, семью готовыми скриптами Backтеest плюс real time bot, который уже можно использовать полноценно. На этом вс. Спасибо всем, кто посмотрел данный ролик до конца. Увидимся в следующих обучающих роликах.